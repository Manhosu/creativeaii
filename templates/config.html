<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öôÔ∏è Configura√ß√µes - Sistema de Gera√ß√£o SEO</title>
    <link rel="stylesheet" href="/static/css/_design_system.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --bg-card: #1e1e1e;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --accent-blue: #0ea5e9;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-bg-hover: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-border-hover: rgba(255, 255, 255, 0.12);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
            --gradient-primary: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            --gradient-secondary: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            --gradient-danger: linear-gradient(135deg, var(--accent-red), var(--accent-orange));
        }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(14, 165, 233, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .header {
            background: rgba(17, 17, 17, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 20px 0;
        }
        
        .header .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .header h1 {
            font-size: 1.875rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .status-indicator {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .back-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 10px 18px;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-btn:hover {
            background: var(--glass-bg-hover);
            border-color: var(--glass-border-hover);
            transform: translateY(-1px);
            color: var(--text-primary);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 24px;
        }
        
        .loading {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 48px;
            height: 48px;
            border: 3px solid var(--glass-border);
            border-radius: 50%;
            border-top-color: var(--accent-blue);
            animation: spin 1s linear infinite;
            margin-bottom: 24px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .top-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        .quick-actions {
            display: flex;
            gap: 12px;
        }
        
        .quick-action-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 8px 16px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .quick-action-btn:hover {
            background: var(--glass-bg-hover);
            color: var(--text-primary);
            transform: translateY(-1px);
        }
        
        .tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 32px;
            background: var(--glass-bg);
            border-radius: 16px;
            padding: 6px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }
        
        .tab {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            padding: 14px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 48px;
        }
        
        .tab.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-lg);
        }
        
        .tab:hover:not(.active) {
            background: var(--glass-bg-hover);
            color: var(--text-primary);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .config-section {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }
        
        .config-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-primary);
            opacity: 0.6;
        }
        
        .config-section h3 {
            font-size: 1.5rem;
            margin-bottom: 24px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .config-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .config-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .config-label i {
            color: var(--accent-blue);
        }
        
        .config-input {
            padding: 14px 18px;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        .config-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
            background: var(--bg-card);
        }
        
        .config-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .config-select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
            padding-right: 48px;
        }
        
        .save-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 24px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            min-height: 48px;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .save-btn:disabled {
            background: var(--glass-border);
            color: var(--text-muted);
            cursor: not-allowed;
            transform: none;
        }
        
        .url-list {
            display: grid;
            gap: 16px;
        }
        
        .url-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .url-item:hover {
            background: var(--bg-card);
            border-color: var(--glass-border-hover);
            transform: translateY(-1px);
        }
        
        .url-info h4 {
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .url-info p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 6px;
        }
        
        .url-info small {
            color: var(--text-muted);
            font-size: 0.75rem;
        }
        
        .url-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-sm {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-danger {
            background: var(--gradient-danger);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            border-color: var(--glass-border-hover);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: block;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        /* Estilos para se√ß√µes espec√≠ficas */
        .schedule-status .status-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 24px;
        }
        
        .schedule-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .schedule-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .schedule-label {
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .schedule-value {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        .preview-text {
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 16px;
            color: var(--text-primary);
            font-weight: 500;
        }
        
        /* Estilos para categorias */
        .add-category-form {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .add-btn, .action-btn, .test-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            white-space: nowrap;
        }
        
        .add-btn:hover, .action-btn:hover, .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .action-btn.secondary {
            background: var(--gradient-secondary);
        }
        
        .action-btn.danger {
            background: var(--gradient-danger);
        }
        
        .category-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .categories-list {
            display: grid;
            gap: 16px;
        }
        
        .category-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .category-item:hover {
            background: var(--bg-card);
            border-color: var(--glass-border-hover);
            transform: translateY(-1px);
        }
        
        .category-item.inactive {
            opacity: 0.6;
            background: var(--bg-secondary);
        }
        
        .category-info h4 {
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-info p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 6px;
        }
        
        .category-info small {
            color: var(--text-muted);
            font-size: 0.75rem;
        }
        
        .category-actions-item {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--glass-border);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active {
            background: var(--accent-green);
        }
        
        .toggle-switch::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active::before {
            transform: translateX(30px);
        }
        
        .input-group {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .input-icon {
            position: absolute;
            right: 14px;
            color: var(--text-muted);
            cursor: pointer;
            z-index: 2;
        }
        
        .toggle-password:hover {
            color: var(--accent-blue);
        }
        
        .with-icon {
            padding-right: 45px !important;
        }
        
        .loading-placeholder {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }
        
        @media (max-width: 768px) {
            .add-category-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .category-actions {
                justify-content: center;
            }
            
            .category-item {
                flex-direction: column;
                align-items: stretch;
                gap: 16px;
            }
            
            .category-actions-item {
                justify-content: space-between;
            }
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
        }
        
        .stat-card:hover {
            background: var(--glass-bg-hover);
            transform: translateY(-2px);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .alert {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            border-left: 4px solid;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
        }
        
        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }
        
        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }
        
        .template-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .template-item:hover {
            background: var(--bg-card);
            transform: translateY(-1px);
        }
        
        .template-item h4 {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .backup-section {
            text-align: center;
            padding: 60px 20px;
        }
        
        .backup-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .backup-btn {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 160px;
            justify-content: center;
        }
        
        .backup-btn.export {
            background: var(--gradient-danger);
        }
        
        .backup-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 24px 16px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .config-section {
                padding: 24px;
            }
            
            .config-grid {
                grid-template-columns: 1fr;
            }
            
            .url-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .header .container {
                padding: 0 16px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .backup-actions {
                flex-direction: column;
                align-items: center;
            }
        }
        
        .floating-save {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.3s ease;
        }
        
        .floating-save.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .input-group {
            position: relative;
        }
        
        .input-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
        }
        
        .config-input.with-icon {
            padding-right: 48px;
        }
        
        /* Estilos para Prefer√™ncias de Gera√ß√£o */
        .preference-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
            padding: 20px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .status-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .status-value {
            font-size: 1rem;
            color: var(--text-primary);
            font-weight: 600;
        }
        
        .preference-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }
        
        .preference-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .preference-btn.primary {
            background: var(--gradient-primary);
            color: white;
        }
        
        .preference-btn.secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--glass-border);
        }
        
        .preference-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }
        
        .preference-section {
            margin-bottom: 40px;
            padding: 24px;
            background: var(--bg-tertiary);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
        }
        
        .preference-section h4 {
            color: var(--text-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }
        
        .section-desc {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 0.9rem;
        }
        
        .selector-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        
        .selector-btn {
            padding: 8px 12px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .selector-btn:hover {
            background: var(--bg-card);
            color: var(--text-primary);
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .category-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .category-item:hover {
            background: var(--bg-card);
        }
        
        .category-item.selected {
            background: var(--accent-blue);
            color: white;
            border-color: var(--accent-blue);
        }
        
        .category-checkbox {
            appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid var(--glass-border);
            border-radius: 4px;
            position: relative;
            cursor: pointer;
        }
        
        .category-checkbox:checked {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }
        
        .category-checkbox:checked::after {
            content: '‚úì';
            position: absolute;
            top: -2px;
            left: 1px;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .product-search {
            margin-bottom: 16px;
        }
        
        .product-filters {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 12px;
            margin-bottom: 16px;
            align-items: center;
        }
        
        .filter-actions {
            display: flex;
            gap: 8px;
        }
        
        .product-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            margin-bottom: 24px;
        }
        
        .product-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-bottom: 1px solid var(--glass-border);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .product-item:last-child {
            border-bottom: none;
        }
        
        .product-item:hover {
            background: var(--bg-secondary);
        }
        
        .product-item.selected {
            background: var(--bg-card);
            border-left: 4px solid var(--accent-blue);
        }
        
        .product-checkbox {
            appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid var(--glass-border);
            border-radius: 4px;
            position: relative;
            cursor: pointer;
        }
        
        .product-checkbox:checked {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }
        
        .product-checkbox:checked::after {
            content: '‚úì';
            position: absolute;
            top: -2px;
            left: 1px;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .product-info {
            flex: 1;
        }
        
        .product-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .product-details {
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .product-tag {
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            border: 1px solid var(--glass-border);
        }
        
        .loading-placeholder {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }
        
        .loading-placeholder i {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        
        @media (max-width: 768px) {
            .preference-actions {
                flex-direction: column;
            }
            
            .category-grid {
                grid-template-columns: 1fr;
            }
            
            .product-filters {
                grid-template-columns: 1fr;
            }
            
            .filter-actions {
                justify-content: stretch;
            }
            
            .selector-actions {
                justify-content: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="floating-nav">
        <a href="javascript:history.back()" class="nav-btn" title="Voltar">‚Üê</a>
        <a href="/" class="nav-btn" title="Dashboard">üè†</a>
    </div>
    
    <div class="header">
        <div class="container">
            <h1><i class="fas fa-cogs"></i>Configura√ß√µes</h1>
            <div class="header-actions">
                <div class="status-indicator">
                    <i class="fas fa-circle"></i>
                    Sistema Online
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <h3>Carregando configura√ß√µes...</h3>
            <p>Aguarde enquanto sincronizamos suas prefer√™ncias</p>
        </div>
        
        <div id="content" style="display: none;">
            <div class="top-actions">
                <div>
                    <h2 style="margin: 0; color: var(--text-primary); font-weight: 600;">Painel de Configura√ß√µes</h2>
                    <p style="color: var(--text-secondary); margin-top: 4px;">Gerencie todas as configura√ß√µes do sistema</p>
                </div>
                <div class="quick-actions">
                    <a href="#" class="quick-action-btn" onclick="saveAllConfigs()">
                        <i class="fas fa-save"></i>
                        Salvar Tudo
                    </a>
                    <a href="#" class="quick-action-btn" onclick="exportConfig()">
                        <i class="fas fa-download"></i>
                        Export
                    </a>
                </div>
            </div>
            
            <div class="tabs">
                <button class="tab active" data-tab="api">
                    <i class="fas fa-robot"></i>
                    API
                </button>
                <button class="tab" data-tab="wordpress">
                    <i class="fab fa-wordpress"></i>
                    WordPress
                </button>
                <button class="tab" data-tab="geral">
                    <i class="fas fa-sliders-h"></i>
                    Geral
                </button>
                <button class="tab" data-tab="agenda">
                    <i class="fas fa-calendar-alt"></i>
                    Agenda
                </button>
                <button class="tab" data-tab="categorias">
                    <i class="fas fa-tags"></i>
                    Categorias
                </button>
            </div>
            
            <!-- API -->
            <div class="tab-content active" id="api">
                <div class="config-section">
                    <h3><i class="fas fa-robot"></i>Configura√ß√µes da API</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Configure a chave da API, modelo utilizado e temperatura para gera√ß√£o de conte√∫do</p>
                    <div class="config-grid">
                        <div class="config-item" style="grid-column: 1 / -1;">
                            <label class="config-label">
                                <i class="fas fa-key"></i>
                                Chave da API OpenAI
                            </label>
                            <div class="input-group">
                                <input type="password" class="config-input with-icon" id="openai_api_key" placeholder="sk-proj-...">
                                <i class="fas fa-eye-slash input-icon toggle-password" onclick="togglePassword('openai_api_key')"></i>
                            </div>
                            <small style="color: var(--text-muted); margin-top: 4px;">
                                <i class="fas fa-info-circle"></i>
                                Sua chave da API OpenAI para gera√ß√£o de conte√∫do
                            </small>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-brain"></i>
                                Modelo Utilizado
                            </label>
                            <select class="config-input config-select" id="openai_model">
                                <option value="gpt-4o-mini">GPT-4o Mini (Recomendado)</option>
                                <option value="gpt-4o">GPT-4o (Avan√ßado)</option>
                                <option value="gpt-4">GPT-4 (Premium)</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo (Econ√¥mico)</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-thermometer-half"></i>
                                Temperatura (0.0 - 2.0)
                            </label>
                            <div class="input-group">
                                <input type="number" class="config-input with-icon" id="temperature" min="0" max="2" step="0.1" placeholder="0.7">
                                <i class="fas fa-fire input-icon"></i>
                            </div>
                            <small style="color: var(--text-muted); margin-top: 4px;">
                                Controla a criatividade: 0.0 = mais preciso, 2.0 = mais criativo
                            </small>
                        </div>
                            </div>
                    <button class="save-btn" onclick="saveAPIConfig()">
                        <i class="fas fa-save"></i>
                        Salvar Configura√ß√µes da API
                    </button>
                </div>
                </div>
                
            <!-- WordPress -->
            <div class="tab-content" id="wordpress">
                <div class="config-section">
                    <h3><i class="fab fa-wordpress"></i>Configura√ß√µes do WordPress</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Configure a conex√£o com seu blog WordPress</p>
                    <div class="config-grid">
                        <div class="config-item" style="grid-column: 1 / -1;">
                            <label class="config-label">
                                <i class="fas fa-globe"></i>
                                URL do Site WordPress
                            </label>
                            <div class="input-group">
                                <input type="url" class="config-input with-icon" id="wp_site_url" placeholder="https://blog.creativecopias.com.br">
                                <i class="fas fa-external-link-alt input-icon"></i>
                            </div>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-user"></i>
                                Usu√°rio do App
                            </label>
                            <div class="input-group">
                                <input type="text" class="config-input with-icon" id="wp_username" placeholder="api_seo_bot">
                                <i class="fas fa-at input-icon"></i>
                            </div>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-lock"></i>
                                Senha do App
                            </label>
                            <div class="input-group">
                                <input type="password" class="config-input with-icon" id="wp_password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                <i class="fas fa-eye-slash input-icon toggle-password" onclick="togglePassword('wp_password')"></i>
                            </div>
                        </div>
                    </div>
                    <div class="connection-test" style="margin-top: 24px;">
                        <button class="test-btn" onclick="testWordPressConnection()">
                            <i class="fas fa-plug"></i>
                            Testar Conex√£o
                        </button>
                        <div id="connection-status" style="margin-top: 12px;"></div>
                    </div>
                    <button class="save-btn" onclick="saveWordPressConfig()">
                        <i class="fas fa-save"></i>
                        Salvar Configura√ß√µes WordPress
                    </button>
                </div>
            </div>
            
                        <!-- Geral -->
            <div class="tab-content" id="geral">
                <div class="config-section">
                    <h3><i class="fas fa-sliders-h"></i>Configura√ß√µes Gerais</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Configure idioma, tom do conte√∫do e par√¢metros de texto</p>
                    <div class="config-grid">
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-language"></i>
                                Linguagem
                            </label>
                            <select class="config-input config-select" id="linguagem">
                                <option value="pt-BR">Portugu√™s (Brasil)</option>
                                <option value="pt-PT">Portugu√™s (Portugal)</option>
                                <option value="en-US">English (US)</option>
                                <option value="es-ES">Espa√±ol</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-palette"></i>
                                Tom do Conte√∫do
                            </label>
                            <select class="config-input config-select" id="tom_conteudo">
                                <option value="profissional">Profissional</option>
                                <option value="amigavel">Amig√°vel</option>
                                <option value="tecnico">T√©cnico</option>
                                <option value="informal">Informal</option>
                                <option value="comercial">Comercial</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-sort-numeric-down"></i>
                                Quantidade M√≠nima de Palavras
                            </label>
                            <div class="input-group">
                                <input type="number" class="config-input with-icon" id="palavras_min" min="100" max="5000" placeholder="500">
                                <i class="fas fa-minus input-icon"></i>
                            </div>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-sort-numeric-up"></i>
                                Quantidade M√°xima de Palavras
                            </label>
                            <div class="input-group">
                                <input type="number" class="config-input with-icon" id="palavras_max" min="500" max="10000" placeholder="1500">
                                <i class="fas fa-plus input-icon"></i>
                    </div>
                        </div>
                    </div>
                    <button class="save-btn" onclick="saveGeralConfig()">
                        <i class="fas fa-save"></i>
                        Salvar Configura√ß√µes Gerais
                    </button>
                </div>
            </div>
            
            <!-- Agenda -->
            <div class="tab-content" id="agenda">
                <div class="config-section">
                    <h3><i class="fas fa-calendar-alt"></i>Agenda de Execu√ß√£o Autom√°tica</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Configure quando o sistema executar√° automaticamente</p>
                    
                    <div class="schedule-status" style="margin-bottom: 32px;">
                        <div class="status-card">
                            <h4><i class="fas fa-clock"></i> Status Atual</h4>
                            <div id="current-schedule" class="schedule-info">
                                <div class="schedule-item">
                                    <span class="schedule-label">Pr√≥xima Execu√ß√£o:</span>
                                    <span class="schedule-value" id="next-execution">Carregando...</span>
                    </div>
                                <div class="schedule-item">
                                    <span class="schedule-label">√öltima Execu√ß√£o:</span>
                                    <span class="schedule-value" id="last-execution">Carregando...</span>
                                </div>
                    </div>
                </div>
            </div>
            
                    <div class="config-grid">
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-calendar-day"></i>
                                Dia da Semana
                            </label>
                            <select class="config-input config-select" id="dia_execucao">
                                <option value="0">Domingo</option>
                                <option value="1">Segunda-feira</option>
                                <option value="2">Ter√ßa-feira</option>
                                <option value="3">Quarta-feira</option>
                                <option value="4">Quinta-feira</option>
                                <option value="5">Sexta-feira</option>
                                <option value="6">S√°bado</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label class="config-label">
                                <i class="fas fa-clock"></i>
                                Hor√°rio de Execu√ß√£o
                            </label>
                            <div class="input-group">
                                <input type="time" class="config-input with-icon" id="horario_execucao" value="10:00">
                                <i class="fas fa-clock input-icon"></i>
                    </div>
                </div>
            </div>
            
                    <div class="schedule-preview" style="margin-top: 24px;">
                        <h4 style="color: var(--text-primary); margin-bottom: 12px;">
                            <i class="fas fa-eye"></i> Pr√©via da Programa√ß√£o
                        </h4>
                        <div id="schedule-preview" class="preview-text">
                            Configura√ß√£o ser√° exibida aqui conforme voc√™ seleciona as op√ß√µes
                        </div>
                    </div>

                    <button class="save-btn" onclick="saveAgendaConfig()">
                        <i class="fas fa-save"></i>
                        Salvar Configura√ß√µes da Agenda
                    </button>
                </div>
            </div>
            
            <!-- Categorias -->
            <div class="tab-content" id="categorias">
                <div class="config-section">
                    <h3><i class="fas fa-tags"></i>Gerenciamento de Categorias</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 32px;">
                        Gerencie as categorias do sistema. Categorias desativadas n√£o aparecer√£o no filtro do scraper.
                    </p>
                    
                    <!-- Status das Categorias -->
                    <div class="category-stats" style="margin-bottom: 32px;">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-number" id="total-categories">0</span>
                                <div class="stat-label">Total de Categorias</div>
                        </div>
                            <div class="stat-card">
                                <span class="stat-number" id="active-categories">0</span>
                                <div class="stat-label">Categorias Ativas</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="inactive-categories">0</span>
                                <div class="stat-label">Categorias Inativas</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Adicionar Nova Categoria -->
                    <div class="add-category-section" style="margin-bottom: 32px;">
                        <h4><i class="fas fa-plus-circle"></i> Adicionar Nova Categoria</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 16px;">
                            Insira o link da categoria para inclu√≠-la automaticamente no sistema
                        </p>
                        <div class="add-category-form">
                            <div class="input-group" style="flex: 1;">
                                <input type="url" class="config-input with-icon" id="new-category-url" 
                                       placeholder="https://creativecopias.com.br/categoria/impressoras">
                                <i class="fas fa-link input-icon"></i>
                            </div>
                            <button class="add-btn" onclick="addNewCategory()">
                                <i class="fas fa-plus"></i>
                                Adicionar Categoria
                        </button>
                        </div>
                        <div id="add-category-status" style="margin-top: 12px;"></div>
                    </div>
                    
                    <!-- A√ß√µes R√°pidas -->
                    <div class="category-actions" style="margin-bottom: 32px;">
                        <button class="action-btn primary" onclick="syncAllCategories()">
                            <i class="fas fa-sync"></i>
                            Sincronizar Todas
                                </button>
                        <button class="action-btn secondary" onclick="enableAllCategories()">
                                    <i class="fas fa-check-double"></i>
                            Ativar Todas
                                </button>
                        <button class="action-btn danger" onclick="disableAllCategories()">
                                    <i class="fas fa-times"></i>
                            Desativar Todas
                                </button>
                            </div>
                            
                    <!-- Lista de Categorias -->
                    <div class="categories-section">
                        <h4><i class="fas fa-list"></i> Lista de Categorias</h4>
                        <div class="category-filter" style="margin-bottom: 20px;">
                            <input type="text" class="config-input" id="category-search" 
                                   placeholder="Buscar categorias..." onkeyup="filterCategories()">
                        </div>
                        
                        <div id="categories-list" class="categories-list">
                                <div class="loading-placeholder">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    Carregando categorias...
                                </div>
                            </div>
                        </div>
                        
                    <button class="save-btn" onclick="saveCategoriesConfig()">
                            <i class="fas fa-save"></i>
                        Salvar Configura√ß√µes de Categorias
                        </button>
                    </div>
                    

                </div>
            </div>
            
            <!-- Backup -->
            <div class="tab-content" id="backup">
                <div class="config-section">
                    <h3><i class="fas fa-shield-alt"></i>Backup e Restaura√ß√£o</h3>
                    <div class="backup-section">
                        <h4 style="color: var(--text-primary); margin-bottom: 16px;">Prote√ß√£o de Dados</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 32px;">Mantenha suas configura√ß√µes seguras com backups autom√°ticos</p>
                        <div class="backup-actions">
                            <button class="backup-btn" onclick="createBackup()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                Criar Backup
                            </button>
                            <button class="backup-btn export" onclick="exportConfig()">
                                <i class="fas fa-file-export"></i>
                                Exportar Dados
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Estat√≠sticas -->
            <div class="tab-content" id="stats">
                <div class="config-section">
                    <h3><i class="fas fa-chart-bar"></i>Estat√≠sticas do Sistema</h3>
                    <div id="statsContent">
                        <!-- Estat√≠sticas dinamicamente inseridas aqui -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="floating-save" id="floatingSave">
        <button class="save-btn" onclick="saveAllConfigs()">
            <i class="fas fa-save"></i>
            Salvar Altera√ß√µes
        </button>
    </div>
    
    <script>
        let configData = {};
        let hasUnsavedChanges = false;
        
        // Carregar dados ao inicializar
        document.addEventListener('DOMContentLoaded', function() {
            loadConfigData();
            setupTabs();
            setupChangeDetection();
        });
        
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });
        }
        
        function setupChangeDetection() {
            const inputs = document.querySelectorAll('.config-input');
            inputs.forEach(input => {
                input.addEventListener('input', () => {
                    hasUnsavedChanges = true;
                    document.getElementById('floatingSave').classList.add('visible');
                    
                    // Atualizar preview da agenda em tempo real
                    if (input.id === 'dia_execucao' || input.id === 'horario_execucao') {
                        updateSchedulePreview();
                    }
                });
            });
        }

        // Fun√ß√£o para mostrar/ocultar senha
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const icon = field.nextElementSibling;
            
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            } else {
                field.type = 'password';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            }
        }

        // Atualizar preview da agenda
        function updateSchedulePreview() {
            const dia = document.getElementById('dia_execucao').value;
            const horario = document.getElementById('horario_execucao').value;
            
            const dias = ['Domingo', 'Segunda-feira', 'Ter√ßa-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'S√°bado'];
            const diaTexto = dias[dia] || 'N√£o selecionado';
            
            const preview = document.getElementById('schedule-preview');
            preview.innerHTML = `
                <i class="fas fa-calendar-check"></i>
                O sistema executar√° automaticamente toda <strong>${diaTexto}</strong> √†s <strong>${horario}</strong>
            `;
        }
        
        async function loadConfigData() {
            try {
                // Carregar dados b√°sicos
                await Promise.all([
                    loadAPIConfig(),
                    loadWordPressConfig(),
                    loadGeralConfig(),
                    loadAgendaConfig(),
                    loadCategoriesData()
                ]);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                
            } catch (error) {
                console.error('Error loading config:', error);
                showAlert('Erro ao carregar configura√ß√µes: ' + error.message, 'error');
            }
        }

        // Carregar configura√ß√µes da API
        async function loadAPIConfig() {
            try {
                const response = await fetch('/config/api');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('openai_api_key').value = data.api_key || '';
                    document.getElementById('openai_model').value = data.model || 'gpt-4o-mini';
                    document.getElementById('temperature').value = data.temperature || '0.7';
                }
            } catch (error) {
                console.log('API config not found, using defaults');
            }
        }

        // Carregar configura√ß√µes do WordPress
        async function loadWordPressConfig() {
            try {
                const response = await fetch('/config/wordpress');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('wp_site_url').value = data.site_url || '';
                    document.getElementById('wp_username').value = data.username || '';
                    document.getElementById('wp_password').value = data.password || '';
                }
            } catch (error) {
                console.log('WordPress config not found, using defaults');
            }
        }

        // Carregar configura√ß√µes gerais
        async function loadGeralConfig() {
            try {
                const response = await fetch('/config/geral');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('linguagem').value = data.linguagem || 'pt-BR';
                    document.getElementById('tom_conteudo').value = data.tom_conteudo || 'profissional';
                    document.getElementById('palavras_min').value = data.palavras_min || '500';
                    document.getElementById('palavras_max').value = data.palavras_max || '1500';
                }
            } catch (error) {
                console.log('Geral config not found, using defaults');
            }
        }

        // Carregar configura√ß√µes da agenda
        async function loadAgendaConfig() {
            try {
                const response = await fetch('/config/agenda');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('dia_execucao').value = data.dia_execucao || '0';
                    document.getElementById('horario_execucao').value = data.horario_execucao || '10:00';
                    
                    // Atualizar status da agenda
                    if (data.next_execution) {
                        document.getElementById('next-execution').textContent = data.next_execution;
                    }
                    if (data.last_execution) {
                        document.getElementById('last-execution').textContent = data.last_execution;
                    }
                }
                updateSchedulePreview();
            } catch (error) {
                console.log('Agenda config not found, using defaults');
            }
        }
        
        function populateConfigForms() {
            const configs = configData.configurations;
            
            // Generator configs
            if (configs.generator) {
                document.getElementById('openai_model').value = configs.generator.openai_model?.value || 'gpt-4o-mini';
                document.getElementById('temperature').value = configs.generator.temperature?.value || '0.7';
                document.getElementById('max_tokens').value = configs.generator.max_tokens?.value || '2000';
                document.getElementById('base_prompt').value = configs.generator.base_prompt?.value || '';
            }
            
            // WordPress configs
            if (configs.wordpress) {
                document.getElementById('wp_site_url').value = configs.wordpress.site_url?.value || '';
                document.getElementById('wp_username').value = configs.wordpress.username?.value || '';
                document.getElementById('wp_password').value = configs.wordpress.password?.value || '';
                document.getElementById('wp_default_category').value = configs.wordpress.default_category?.value || '';
            }
        }
        
        function populateURLList() {
            const urlList = document.getElementById('urlList');
            const urls = configData.monitored_urls || [];
            
            urlList.innerHTML = urls.map(url => `
                <div class="url-item">
                    <div class="url-info">
                        <h4><i class="fas fa-globe"></i> ${url.name}</h4>
                        <p>${url.url}</p>
                        <small><i class="fas fa-tag"></i> Categoria: ${url.category} | <i class="fas fa-star"></i> Prioridade: ${url.priority}</small>
                    </div>
                    <div class="url-actions">
                        <button class="btn-sm btn-danger" onclick="removeURL(${url.id})">
                            <i class="fas fa-trash"></i>
                            Remover
                        </button>
                    </div>
                </div>
            `).join('');
            
            // URL Stats
            const categories = [...new Set(urls.map(u => u.category))];
            document.getElementById('urlStats').innerHTML = `
                <div class="stat-card">
                    <span class="stat-number">${urls.length}</span>
                    <div class="stat-label">Total URLs</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${categories.length}</span>
                    <div class="stat-label">Categorias</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${urls.filter(u => u.active).length}</span>
                    <div class="stat-label">Ativas</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${Math.round(urls.reduce((sum, u) => sum + (u.priority || 5), 0) / urls.length) || 0}</span>
                    <div class="stat-label">Prioridade M√©dia</div>
                </div>
            `;
        }
        
        function populateTemplateList() {
            const templateList = document.getElementById('templateList');
            const templates = configData.content_templates || [];
            
            templateList.innerHTML = templates.map(template => `
                <div class="template-item">
                    <h4><i class="fas fa-file-code"></i> ${template.template_name}</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 8px;">Tipo: ${template.product_type}</p>
                    <small style="color: var(--text-muted);">
                        <i class="fas fa-calendar"></i> Criado em: ${new Date(template.created_at).toLocaleDateString('pt-BR')}
                    </small>
                </div>
            `).join('') || '<p style="text-align: center; color: var(--text-secondary); padding: 40px;">Nenhum template personalizado encontrado.</p>';
        }
        
        function populateStats() {
            const statsContent = document.getElementById('statsContent');
            const totalConfigs = Object.keys(configData.configurations).length;
            const totalUrls = (configData.monitored_urls || []).length;
            const totalTemplates = (configData.content_templates || []).length;
            
            statsContent.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">${totalConfigs}</span>
                        <div class="stat-label">Se√ß√µes de Config</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">${totalUrls}</span>
                        <div class="stat-label">URLs Monitoradas</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">${totalTemplates}</span>
                        <div class="stat-label">Templates</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">${totalConfigs + totalUrls + totalTemplates}</span>
                        <div class="stat-label">Total de Itens</div>
                    </div>
                </div>
                <div style="margin-top: 32px; text-align: center;">
                    <h4 style="color: var(--text-primary); margin-bottom: 16px;">Resumo do Sistema</h4>
                    <p style="color: var(--text-secondary);">
                        Seu sistema est√° configurado com <strong>${totalConfigs} se√ß√µes</strong> de configura√ß√£o,
                        monitorando <strong>${totalUrls} URLs</strong> e utilizando <strong>${totalTemplates} templates</strong>
                        personalizados para gera√ß√£o de conte√∫do.
                    </p>
                </div>
            `;
        }
        
        async function saveGeneratorConfig() {
            const configs = {
                generator: {
                    openai_model: { value: document.getElementById('openai_model').value, type: 'text' },
                    temperature: { value: parseFloat(document.getElementById('temperature').value), type: 'float' },
                    max_tokens: { value: parseInt(document.getElementById('max_tokens').value), type: 'int' },
                    base_prompt: { value: document.getElementById('base_prompt').value, type: 'text' }
                }
            };
            
            await saveConfig(configs);
        }
        
        async function saveWordPressConfig() {
            const configs = {
                wordpress: {
                    site_url: { value: document.getElementById('wp_site_url').value, type: 'text' },
                    username: { value: document.getElementById('wp_username').value, type: 'text' },
                    password: { value: document.getElementById('wp_password').value, type: 'text' },
                    default_category: { value: document.getElementById('wp_default_category').value, type: 'text' }
                }
            };
            
            await saveConfig(configs);
        }
        
        async function saveAllConfigs() {
            try {
                await saveGeneratorConfig();
                await saveWordPressConfig();
                hasUnsavedChanges = false;
                document.getElementById('floatingSave').classList.remove('visible');
                showAlert('Todas as configura√ß√µes foram salvas com sucesso!', 'success');
            } catch (error) {
                showAlert('Erro ao salvar algumas configura√ß√µes: ' + error.message, 'error');
            }
        }
        
        async function saveConfig(configurations) {
            try {
                const response = await fetch('/config/update', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ configurations })
                });
                
                if (!response.ok) throw new Error('Failed to save config');
                
                showAlert('Configura√ß√µes salvas com sucesso!', 'success');
                loadConfigData(); // Reload data
                
            } catch (error) {
                console.error('Error saving config:', error);
                showAlert('Erro ao salvar configura√ß√µes: ' + error.message, 'error');
            }
        }
        
        async function createBackup() {
            try {
                const response = await fetch('/config/backup', { method: 'POST' });
                if (!response.ok) throw new Error('Failed to create backup');
                
                const result = await response.json();
                showAlert(`Backup criado com sucesso: ${result.backup_name}`, 'success');
                
            } catch (error) {
                showAlert('Erro ao criar backup: ' + error.message, 'error');
            }
        }
        
        async function exportConfig() {
            try {
                const response = await fetch('/config/export');
                if (!response.ok) throw new Error('Failed to export config');
                
                const data = await response.json();
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `config-seo-system-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                
                URL.revokeObjectURL(url);
                showAlert('Configura√ß√µes exportadas com sucesso!', 'success');
                
            } catch (error) {
                showAlert('Erro ao exportar configura√ß√µes: ' + error.message, 'error');
            }
        }
        
        async function removeURL(urlId) {
            if (!confirm('Tem certeza que deseja remover esta URL?')) return;
            
            try {
                const response = await fetch(`/config/urls/${urlId}`, { method: 'DELETE' });
                if (!response.ok) throw new Error('Failed to remove URL');
                
                showAlert('URL removida com sucesso!', 'success');
                loadConfigData(); // Reload data
                
            } catch (error) {
                showAlert('Erro ao remover URL: ' + error.message, 'error');
            }
        }
        
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            
            const container = document.querySelector('.container');
            container.insertBefore(alertDiv, container.firstChild);
            
            setTimeout(() => alertDiv.remove(), 5000);
        }
        
        // Detectar mudan√ßas n√£o salvas ao sair da p√°gina
        window.addEventListener('beforeunload', (e) => {
            if (hasUnsavedChanges) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
        
        // =====================================================
        // FUN√á√ïES PARA PREFER√äNCIAS DE GERA√á√ÉO
        // =====================================================
        
        let availableCategories = [];
        let availableProducts = [];
        let selectedCategories = [];
        let selectedProducts = [];
        let currentPreferences = {};
        
        async function loadPreferences() {
            try {
                // Carregar prefer√™ncias atuais
                const prefsResponse = await fetch('/config/generation-preferences');
                if (prefsResponse.ok) {
                    const prefsData = await prefsResponse.json();
                    currentPreferences = prefsData.preferences;
                    selectedCategories = currentPreferences.allowed_categories || [];
                    selectedProducts = currentPreferences.allowed_products || [];
                    updatePreferenceStatus();
                }
                
                // Carregar produtos dispon√≠veis
                await loadProducts();
                
            } catch (error) {
                console.error('Erro ao carregar prefer√™ncias:', error);
                showAlert('Erro ao carregar prefer√™ncias: ' + error.message, 'error');
            }
        }
        
        function updatePreferenceStatus() {
            const filterMode = currentPreferences.filter_mode || 'none';
            const totalFilters = selectedCategories.length + selectedProducts.length;
            
            document.getElementById('currentFilterMode').textContent = {
                'none': 'Sem filtros (todos os produtos)',
                'categories': `Filtro por categorias (${selectedCategories.length} selecionadas)`,
                'products': `Filtro por produtos (${selectedProducts.length} selecionados)`
            }[filterMode] || 'Desconhecido';
            
            document.getElementById('activeFiltersCount').textContent = `${totalFilters} filtros ativos`;
        }
        
        async function syncProducts() {
            try {
                showAlert('Sincronizando produtos...', 'info');
                
                const response = await fetch('/config/products/sync', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (!response.ok) throw new Error('Falha na sincroniza√ß√£o');
                
                const result = await response.json();
                showAlert(`${result.products_count} produtos sincronizados com sucesso!`, 'success');
                
                // Recarregar lista de produtos
                await loadProducts();
                
            } catch (error) {
                showAlert('Erro ao sincronizar produtos: ' + error.message, 'error');
            }
        }
        
        async function clearAllFilters() {
            if (!confirm('Tem certeza que deseja remover todos os filtros de gera√ß√£o?')) return;
            
            try {
                const response = await fetch('/config/generation-preferences/clear', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (!response.ok) throw new Error('Falha ao limpar filtros');
                
                selectedCategories = [];
                selectedProducts = [];
                currentPreferences.filter_mode = 'none';
                
                updatePreferenceStatus();
                updateCategoryDisplay();
                updateProductDisplay();
                
                showAlert('Todos os filtros foram removidos!', 'success');
                
            } catch (error) {
                showAlert('Erro ao limpar filtros: ' + error.message, 'error');
            }
        }
        
        async function loadWordPressCategories() {
            try {
                const response = await fetch('/publisher/categories');
                if (!response.ok) throw new Error('Falha ao carregar categorias');
                
                const result = await response.json();
                availableCategories = result.categories || [];
                
                updateCategoryDisplay();
                showAlert(`${availableCategories.length} categorias carregadas do WordPress!`, 'success');
                
            } catch (error) {
                console.error('Erro ao carregar categorias:', error);
                showAlert('Erro ao carregar categorias: ' + error.message, 'error');
                
                // Fallback para categorias padr√£o
                availableCategories = [
                    { id: 1, name: 'Impressoras', slug: 'impressoras' },
                    { id: 2, name: 'Multifuncionais', slug: 'multifuncionais' },
                    { id: 3, name: 'Toners', slug: 'toners' },
                    { id: 4, name: 'Scanners', slug: 'scanners' },
                    { id: 5, name: 'Pap√©is', slug: 'papeis' },
                    { id: 6, name: 'Suprimentos', slug: 'suprimentos' }
                ];
                updateCategoryDisplay();
            }
        }
        
        function updateCategoryDisplay() {
            const categoryGrid = document.getElementById('categoryGrid');
            
            if (availableCategories.length === 0) {
                categoryGrid.innerHTML = '<div class="loading-placeholder"><i class="fas fa-info-circle"></i> Clique em "Carregar do WordPress" para buscar categorias</div>';
                return;
            }
            
            categoryGrid.innerHTML = availableCategories.map(category => {
                const isSelected = selectedCategories.includes(category.name);
                return `
                    <div class="category-item ${isSelected ? 'selected' : ''}" onclick="toggleCategory('${category.name}')">
                        <input type="checkbox" class="category-checkbox" ${isSelected ? 'checked' : ''} readonly>
                        <span>${category.name}</span>
                    </div>
                `;
            }).join('');
        }
        
        function toggleCategory(categoryName) {
            const index = selectedCategories.indexOf(categoryName);
            if (index === -1) {
                selectedCategories.push(categoryName);
            } else {
                selectedCategories.splice(index, 1);
            }
            updateCategoryDisplay();
        }
        
        function selectAllCategories() {
            selectedCategories = availableCategories.map(cat => cat.name);
            updateCategoryDisplay();
        }
        
        function clearCategorySelection() {
            selectedCategories = [];
            updateCategoryDisplay();
        }
        
        async function saveCategoryPreferences() {
            try {
                const response = await fetch('/config/generation-preferences/categories', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ categories: selectedCategories })
                });
                
                if (!response.ok) throw new Error('Falha ao salvar categorias');
                
                const result = await response.json();
                showAlert(result.message, 'success');
                
                // Atualizar prefer√™ncias
                await loadPreferences();
                
            } catch (error) {
                showAlert('Erro ao salvar categorias: ' + error.message, 'error');
            }
        }
        
        async function loadProducts() {
            try {
                const response = await fetch('/config/products');
                if (!response.ok) throw new Error('Falha ao carregar produtos');
                
                const result = await response.json();
                availableProducts = result.products || [];
                
                updateProductDisplay();
                
            } catch (error) {
                console.error('Erro ao carregar produtos:', error);
                // Exibir placeholder de erro
                document.getElementById('productList').innerHTML = `
                    <div class="loading-placeholder">
                        <i class="fas fa-exclamation-triangle"></i>
                        Erro ao carregar produtos. 
                        <button onclick="syncProducts()" style="margin-left: 8px; padding: 4px 8px; border: none; background: var(--accent-blue); color: white; border-radius: 4px; cursor: pointer;">
                            Sincronizar
                        </button>
                    </div>
                `;
            }
        }
        
        function updateProductDisplay() {
            const productList = document.getElementById('productList');
            
            if (availableProducts.length === 0) {
                productList.innerHTML = `
                    <div class="loading-placeholder">
                        <i class="fas fa-box-open"></i>
                        Nenhum produto encontrado. 
                        <button onclick="syncProducts()" style="margin-left: 8px; padding: 4px 8px; border: none; background: var(--accent-blue); color: white; border-radius: 4px; cursor: pointer;">
                            Sincronizar Produtos
                        </button>
                    </div>
                `;
                return;
            }
            
            // Aplicar filtros
            let filteredProducts = availableProducts;
            
            const searchTerm = document.getElementById('productSearch')?.value.toLowerCase() || '';
            const typeFilter = document.getElementById('productTypeFilter')?.value || '';
            const brandFilter = document.getElementById('productBrandFilter')?.value || '';
            
            if (searchTerm) {
                filteredProducts = filteredProducts.filter(product => 
                    product.nome.toLowerCase().includes(searchTerm) ||
                    (product.marca && product.marca.toLowerCase().includes(searchTerm)) ||
                    (product.tipo && product.tipo.toLowerCase().includes(searchTerm))
                );
            }
            
            if (typeFilter) {
                filteredProducts = filteredProducts.filter(product => product.tipo === typeFilter);
            }
            
            if (brandFilter) {
                filteredProducts = filteredProducts.filter(product => product.marca === brandFilter);
            }
            
            productList.innerHTML = filteredProducts.map(product => {
                const isSelected = selectedProducts.includes(product.id);
                return `
                    <div class="product-item ${isSelected ? 'selected' : ''}" onclick="toggleProduct('${product.id}')">
                        <input type="checkbox" class="product-checkbox" ${isSelected ? 'checked' : ''} readonly>
                        <div class="product-info">
                            <div class="product-name">${product.nome}</div>
                            <div class="product-details">
                                ${product.marca ? `<span class="product-tag">${product.marca}</span>` : ''}
                                ${product.tipo ? `<span class="product-tag">${product.tipo}</span>` : ''}
                                ${product.preco ? `<span class="product-tag">${product.preco}</span>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            if (filteredProducts.length === 0) {
                productList.innerHTML = '<div class="loading-placeholder"><i class="fas fa-search"></i> Nenhum produto encontrado com os filtros aplicados</div>';
            }
        }
        
        function toggleProduct(productId) {
            const index = selectedProducts.indexOf(productId);
            if (index === -1) {
                selectedProducts.push(productId);
            } else {
                selectedProducts.splice(index, 1);
            }
            updateProductDisplay();
        }
        
        function filterProducts() {
            updateProductDisplay();
        }
        
        function selectAllVisibleProducts() {
            const visibleProducts = document.querySelectorAll('.product-item:not(.selected)');
            visibleProducts.forEach(item => {
                const productId = item.onclick.toString().match(/'([^']+)'/)[1];
                if (!selectedProducts.includes(productId)) {
                    selectedProducts.push(productId);
                }
            });
            updateProductDisplay();
        }
        
        function clearProductSelection() {
            selectedProducts = [];
            updateProductDisplay();
        }
        
        async function saveProductPreferences() {
            try {
                const response = await fetch('/config/generation-preferences/products', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ product_ids: selectedProducts })
                });
                
                if (!response.ok) throw new Error('Falha ao salvar produtos');
                
                const result = await response.json();
                showAlert(result.message, 'success');
                
                // Atualizar prefer√™ncias
                await loadPreferences();
                
            } catch (error) {
                showAlert('Erro ao salvar produtos: ' + error.message, 'error');
            }
        }
        
        // Carregar dados das categorias
        async function loadCategoriesData() {
            try {
                const response = await fetch('/api/categories');
                if (response.ok) {
                    const categories = await response.json();
                    populateCategoriesList(categories);
                    updateCategoriesStats(categories);
                }
            } catch (error) {
                console.log('Categories not found, using empty list');
                populateCategoriesList([]);
            }
        }

        // Popular lista de categorias
        function populateCategoriesList(categories) {
            const list = document.getElementById('categories-list');
            
            if (categories.length === 0) {
                list.innerHTML = `
                    <div class="loading-placeholder">
                        <i class="fas fa-folder-open"></i>
                        <p>Nenhuma categoria encontrada. Adicione a primeira categoria!</p>
                    </div>
                `;
                return;
            }

            list.innerHTML = categories.map(category => `
                <div class="category-item ${category.active ? '' : 'inactive'}" data-category-id="${category.id}">
                    <div class="category-info">
                        <h4>
                            <i class="fas fa-tag"></i>
                            ${category.name}
                        </h4>
                        <p>${category.url}</p>
                        <small>
                            <i class="fas fa-box"></i> ${category.products_count || 0} produtos | 
                            <i class="fas fa-calendar"></i> Adicionado em ${new Date(category.created_at).toLocaleDateString('pt-BR')}
                        </small>
                    </div>
                    <div class="category-actions-item">
                        <div class="toggle-switch ${category.active ? 'active' : ''}" 
                             onclick="toggleCategoryState('${category.id}', ${!category.active})">
                        </div>
                        <button class="btn-sm btn-danger" onclick="removeCategory('${category.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Atualizar estat√≠sticas das categorias
        function updateCategoriesStats(categories) {
            const total = categories.length;
            const active = categories.filter(c => c.active).length;
            const inactive = total - active;

            document.getElementById('total-categories').textContent = total;
            document.getElementById('active-categories').textContent = active;
            document.getElementById('inactive-categories').textContent = inactive;
        }

        // Fun√ß√µes de salvamento
        async function saveAPIConfig() {
            const config = {
                api_key: document.getElementById('openai_api_key').value,
                model: document.getElementById('openai_model').value,
                temperature: parseFloat(document.getElementById('temperature').value)
            };

            await saveConfigSection('/config/api', config, 'Configura√ß√µes da API salvas com sucesso!');
        }

        async function saveWordPressConfig() {
            const config = {
                site_url: document.getElementById('wp_site_url').value,
                username: document.getElementById('wp_username').value,
                password: document.getElementById('wp_password').value
            };

            await saveConfigSection('/config/wordpress', config, 'Configura√ß√µes do WordPress salvas com sucesso!');
        }

        async function saveGeralConfig() {
            const config = {
                linguagem: document.getElementById('linguagem').value,
                tom_conteudo: document.getElementById('tom_conteudo').value,
                palavras_min: parseInt(document.getElementById('palavras_min').value),
                palavras_max: parseInt(document.getElementById('palavras_max').value)
            };

            await saveConfigSection('/config/geral', config, 'Configura√ß√µes gerais salvas com sucesso!');
        }

        async function saveAgendaConfig() {
            const config = {
                dia_execucao: parseInt(document.getElementById('dia_execucao').value),
                horario_execucao: document.getElementById('horario_execucao').value
            };

            await saveConfigSection('/config/agenda', config, 'Configura√ß√µes da agenda salvas com sucesso!');
        }

        // Fun√ß√£o gen√©rica para salvar configura√ß√µes
        async function saveConfigSection(endpoint, config, successMessage) {
            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(config)
                });

                if (response.ok) {
                    showAlert(successMessage, 'success');
                    hasUnsavedChanges = false;
                    document.getElementById('floatingSave').classList.remove('visible');
                } else {
                    throw new Error('Falha ao salvar configura√ß√µes');
                }
            } catch (error) {
                showAlert('Erro ao salvar: ' + error.message, 'error');
            }
        }

        // Testar conex√£o WordPress
        async function testWordPressConnection() {
            const button = event.target;
            const status = document.getElementById('connection-status');
            
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testando...';
            button.disabled = true;

            try {
                const config = {
                    site_url: document.getElementById('wp_site_url').value,
                    username: document.getElementById('wp_username').value,
                    password: document.getElementById('wp_password').value
                };

                const response = await fetch('/config/wordpress/test', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(config)
                });

                const result = await response.json();
                
                if (response.ok && result.success) {
                    status.innerHTML = '<span style="color: var(--accent-green);"><i class="fas fa-check-circle"></i> Conex√£o bem-sucedida!</span>';
                } else {
                    status.innerHTML = '<span style="color: var(--accent-red);"><i class="fas fa-times-circle"></i> Falha na conex√£o: ' + (result.message || 'Erro desconhecido') + '</span>';
                }
            } catch (error) {
                status.innerHTML = '<span style="color: var(--accent-red);"><i class="fas fa-times-circle"></i> Erro: ' + error.message + '</span>';
            } finally {
                button.innerHTML = '<i class="fas fa-plug"></i> Testar Conex√£o';
                button.disabled = false;
            }
        }

        // Gerenciamento de categorias
        async function addNewCategory() {
            const url = document.getElementById('new-category-url').value;
            const status = document.getElementById('add-category-status');
            
            if (!url) {
                status.innerHTML = '<span style="color: var(--accent-red);"><i class="fas fa-exclamation-triangle"></i> Por favor, insira uma URL</span>';
                return;
            }

            try {
                const response = await fetch('/api/categories', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url: url })
                });

                const result = await response.json();
                
                if (response.ok) {
                    status.innerHTML = '<span style="color: var(--accent-green);"><i class="fas fa-check-circle"></i> Categoria adicionada com sucesso!</span>';
                    document.getElementById('new-category-url').value = '';
                    await loadCategoriesData(); // Recarregar lista
                } else {
                    status.innerHTML = '<span style="color: var(--accent-red);"><i class="fas fa-times-circle"></i> ' + (result.message || 'Erro ao adicionar categoria') + '</span>';
                }
            } catch (error) {
                status.innerHTML = '<span style="color: var(--accent-red);"><i class="fas fa-times-circle"></i> Erro: ' + error.message + '</span>';
            }
        }

        async function toggleCategoryState(categoryId, newState) {
            try {
                const response = await fetch(`/api/categories/${categoryId}/toggle`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ active: newState })
                });

                if (response.ok) {
                    await loadCategoriesData(); // Recarregar lista
                    showAlert(newState ? 'Categoria ativada!' : 'Categoria desativada!', 'success');
                } else {
                    throw new Error('Falha ao alterar status da categoria');
                }
            } catch (error) {
                showAlert('Erro: ' + error.message, 'error');
            }
        }

        async function removeCategory(categoryId) {
            if (!confirm('Tem certeza que deseja remover esta categoria? Esta a√ß√£o n√£o pode ser desfeita.')) {
                return;
            }

            try {
                const response = await fetch(`/api/categories/${categoryId}`, {
                    method: 'DELETE'
                });

                if (response.ok) {
                    await loadCategoriesData(); // Recarregar lista
                    showAlert('Categoria removida com sucesso!', 'success');
                } else {
                    throw new Error('Falha ao remover categoria');
                }
            } catch (error) {
                showAlert('Erro: ' + error.message, 'error');
            }
        }

        async function syncAllCategories() {
            try {
                const response = await fetch('/api/categories/sync', { method: 'POST' });
                
                if (response.ok) {
                    await loadCategoriesData();
                    showAlert('Categorias sincronizadas com sucesso!', 'success');
                } else {
                    throw new Error('Falha na sincroniza√ß√£o');
                }
            } catch (error) {
                showAlert('Erro: ' + error.message, 'error');
            }
        }

        async function enableAllCategories() {
            try {
                const response = await fetch('/api/categories/enable-all', { method: 'PUT' });
                
                if (response.ok) {
                    await loadCategoriesData();
                    showAlert('Todas as categorias foram ativadas!', 'success');
                } else {
                    throw new Error('Falha ao ativar categorias');
                }
            } catch (error) {
                showAlert('Erro: ' + error.message, 'error');
            }
        }

        async function disableAllCategories() {
            if (!confirm('Tem certeza que deseja desativar todas as categorias?')) {
                return;
            }

            try {
                const response = await fetch('/api/categories/disable-all', { method: 'PUT' });
                
                if (response.ok) {
                    await loadCategoriesData();
                    showAlert('Todas as categorias foram desativadas!', 'success');
                } else {
                    throw new Error('Falha ao desativar categorias');
                }
            } catch (error) {
                showAlert('Erro: ' + error.message, 'error');
            }
        }

        function filterCategories() {
            const search = document.getElementById('category-search').value.toLowerCase();
            const items = document.querySelectorAll('.category-item');
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(search) ? 'flex' : 'none';
            });
        }

        function saveCategoriesConfig() {
            showAlert('Configura√ß√µes de categorias salvas automaticamente!', 'success');
        }

        // Fun√ß√£o gen√©rica para mostrar alertas
        function showAlert(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            // Criar notifica√ß√£o visual tempor√°ria
            const alert = document.createElement('div');
            alert.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? 'var(--accent-green)' : type === 'error' ? 'var(--accent-red)' : 'var(--accent-blue)'};
            `;
            alert.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'info'}-circle"></i> ${message}`;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        // Carregar quando a aba de categorias for ativada
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    if (tab.dataset.tab === 'categorias') {
                        setTimeout(() => {
                            loadCategoriesData();
                        }, 100);
                    }
                });
            });
        });
    </script>
</body>
</html> 